<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.11"/>
<title>Barrelfish: lib/nfs/rpc.h File Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">Barrelfish
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.11 -->
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="modules.html"><span>Modules</span></a></li>
      <li><a href="annotated.html"><span>Data&#160;Structures</span></a></li>
      <li class="current"><a href="files.html"><span>Files</span></a></li>
    </ul>
  </div>
  <div id="navrow2" class="tabs2">
    <ul class="tablist">
      <li><a href="files.html"><span>File&#160;List</span></a></li>
      <li><a href="globals.html"><span>Globals</span></a></li>
    </ul>
  </div>
<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a class="el" href="dir_97aefd0d527b934f1d99a682da8fe6a9.html">lib</a></li><li class="navelem"><a class="el" href="dir_9ed955a98a23e94e6a1f2c02db7482ce.html">nfs</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#nested-classes">Data Structures</a> &#124;
<a href="#typedef-members">Typedefs</a> &#124;
<a href="#enum-members">Enumerations</a> &#124;
<a href="#func-members">Functions</a>  </div>
  <div class="headertitle">
<div class="title">rpc.h File Reference</div>  </div>
</div><!--header-->
<div class="contents">

<p>RPC definitions.  
<a href="#details">More...</a></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="nested-classes"></a>
Data Structures</h2></td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structrpc__client.html">rpc_client</a></td></tr>
<tr class="memdesc:"><td class="mdescLeft">&#160;</td><td class="mdescRight">RPC client instance data.  <a href="structrpc__client.html#details">More...</a><br /></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="typedef-members"></a>
Typedefs</h2></td></tr>
<tr class="memitem:ae6012b8944b126ce5271a3c31ebc38c0"><td class="memItemLeft" align="right" valign="top">typedef void(*&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="nfs_2rpc_8h.html#ae6012b8944b126ce5271a3c31ebc38c0">rpc_callback_t</a>) (struct <a class="el" href="structrpc__client.html">rpc_client</a> *<a class="el" href="structrpc__client.html">rpc_client</a>, void *arg1, void *arg2, uint32_t replystat, uint32_t acceptstat, XDR *reply_xdr)</td></tr>
<tr class="memdesc:ae6012b8944b126ce5271a3c31ebc38c0"><td class="mdescLeft">&#160;</td><td class="mdescRight">Callback function for RPC reply handlers.  <a href="#ae6012b8944b126ce5271a3c31ebc38c0">More...</a><br /></td></tr>
<tr class="separator:ae6012b8944b126ce5271a3c31ebc38c0"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="enum-members"></a>
Enumerations</h2></td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:a48c296dbdbd498c70a67412dcc1f85ed"><td class="memItemLeft" align="right" valign="top">err_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="nfs_2rpc_8h.html#a48c296dbdbd498c70a67412dcc1f85ed">rpc_init</a> (struct <a class="el" href="structrpc__client.html">rpc_client</a> *client, struct ip_addr server)</td></tr>
<tr class="memdesc:a48c296dbdbd498c70a67412dcc1f85ed"><td class="mdescLeft">&#160;</td><td class="mdescRight">Initialise a new RPC client instance.  <a href="#a48c296dbdbd498c70a67412dcc1f85ed">More...</a><br /></td></tr>
<tr class="separator:a48c296dbdbd498c70a67412dcc1f85ed"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a9399fe381c374c61f0adfa31adf8c409"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a9399fe381c374c61f0adfa31adf8c409"></a>
void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="nfs_2rpc_8h.html#a9399fe381c374c61f0adfa31adf8c409">rpc_destroy</a> (struct <a class="el" href="structrpc__client.html">rpc_client</a> *client)</td></tr>
<tr class="memdesc:a9399fe381c374c61f0adfa31adf8c409"><td class="mdescLeft">&#160;</td><td class="mdescRight">Destroy the given client, freeing any associated memory. <br /></td></tr>
<tr class="separator:a9399fe381c374c61f0adfa31adf8c409"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a02d683cbecdd595769603ef8e6dc6ecc"><td class="memItemLeft" align="right" valign="top">err_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="nfs_2rpc_8h.html#a02d683cbecdd595769603ef8e6dc6ecc">rpc_call</a> (struct <a class="el" href="structrpc__client.html">rpc_client</a> *client, uint16_t port, uint32_t prog, uint32_t vers, uint32_t proc, xdrproc_t args_xdrproc, void *<a class="el" href="structargs.html">args</a>, size_t args_size, <a class="el" href="nfs_2rpc_8h.html#ae6012b8944b126ce5271a3c31ebc38c0">rpc_callback_t</a> callback, void *cbarg1, void *cbarg2)</td></tr>
<tr class="memdesc:a02d683cbecdd595769603ef8e6dc6ecc"><td class="mdescLeft">&#160;</td><td class="mdescRight">Initiate an RPC Call.  <a href="#a02d683cbecdd595769603ef8e6dc6ecc">More...</a><br /></td></tr>
<tr class="separator:a02d683cbecdd595769603ef8e6dc6ecc"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p>RPC definitions. </p>
</div><h2 class="groupheader">Typedef Documentation</h2>
<a class="anchor" id="ae6012b8944b126ce5271a3c31ebc38c0"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">typedef void(* rpc_callback_t) (struct <a class="el" href="structrpc__client.html">rpc_client</a> *<a class="el" href="structrpc__client.html">rpc_client</a>, void *arg1, void *arg2, uint32_t replystat, uint32_t acceptstat, XDR *reply_xdr)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Callback function for RPC reply handlers. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname"><a class="el" href="structrpc__client.html" title="RPC client instance data. ">rpc_client</a></td><td>RPC client instance pointer </td></tr>
    <tr><td class="paramname">arg1,arg2</td><td>Opaque argument values provided to <a class="el" href="nfs_2rpc_8h.html#a02d683cbecdd595769603ef8e6dc6ecc" title="Initiate an RPC Call. ">rpc_call()</a> </td></tr>
    <tr><td class="paramname">replystat</td><td>Reply status (RPC_MSG_ACCEPTED on success) </td></tr>
    <tr><td class="paramname">acceptstat</td><td>Accept status (RPC_SUCCESS on success) </td></tr>
    <tr><td class="paramname">reply_xdr</td><td>XDR pointer for deserialising any return values</td></tr>
  </table>
  </dd>
</dl>
<dl class="section note"><dt>Note</dt><dd>Two opaque argument values are provided to the callback, as this allows the NFS code to use them to store the callback pointer and argument for its own callbacks without further memory allocation. </dd></dl>

</div>
</div>
<h2 class="groupheader">Enumeration Type Documentation</h2>
<a class="anchor" id="abd41a07710677c71831f55be15ad412b"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">enum <a class="el" href="nfs_2rpc_8h.html#abd41a07710677c71831f55be15ad412b">rpc_accept_stat</a></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Given that a call message was accepted, the following is the status of an attempt to call a remote procedure. </p>
<table class="fieldtable">
<tr><th colspan="2">Enumerator</th></tr><tr><td class="fieldname"><a class="anchor" id="abd41a07710677c71831f55be15ad412ba2978dfe674482d08b7cf4a2e2c8cfe27"></a>RPC_SUCCESS&#160;</td><td class="fielddoc">
<p>RPC executed successfully. </p>
</td></tr>
<tr><td class="fieldname"><a class="anchor" id="abd41a07710677c71831f55be15ad412ba086d10fc1eba07f666b6895658e24ca6"></a>RPC_PROG_UNAVAIL&#160;</td><td class="fielddoc">
<p>remote hasn't exported program </p>
</td></tr>
<tr><td class="fieldname"><a class="anchor" id="abd41a07710677c71831f55be15ad412ba752cd7c6ab0a42fd71dccaf2a0403cfd"></a>RPC_PROG_MISMATCH&#160;</td><td class="fielddoc">
<p>remote can't support version # </p>
</td></tr>
<tr><td class="fieldname"><a class="anchor" id="abd41a07710677c71831f55be15ad412ba125880733e06ecfb308e2ffedaff59d5"></a>RPC_PROC_UNAVAIL&#160;</td><td class="fielddoc">
<p>program can't support procedure </p>
</td></tr>
<tr><td class="fieldname"><a class="anchor" id="abd41a07710677c71831f55be15ad412ba97f76248d513eb8940ad172af23520e9"></a>RPC_GARBAGE_ARGS&#160;</td><td class="fielddoc">
<p>procedure can't decode params </p>
</td></tr>
</table>

</div>
</div>
<a class="anchor" id="a8d58c54a6681c71d4e1a0e6db138dbf6"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">enum <a class="el" href="nfs_2rpc_8h.html#a8d58c54a6681c71d4e1a0e6db138dbf6">rpc_auth_stat</a></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Why authentication failed. </p>
<table class="fieldtable">
<tr><th colspan="2">Enumerator</th></tr><tr><td class="fieldname"><a class="anchor" id="a8d58c54a6681c71d4e1a0e6db138dbf6a982e91f294fe5055cdaec0605c0257ff"></a>RPC_AUTH_BADCRED&#160;</td><td class="fielddoc">
<p>bad credentials (seal broken) </p>
</td></tr>
<tr><td class="fieldname"><a class="anchor" id="a8d58c54a6681c71d4e1a0e6db138dbf6a4ae96abbe3001b586b2f67f4c3ed7423"></a>RPC_AUTH_REJECTEDCRED&#160;</td><td class="fielddoc">
<p>client must begin new session </p>
</td></tr>
<tr><td class="fieldname"><a class="anchor" id="a8d58c54a6681c71d4e1a0e6db138dbf6a7305017b4e0dcd2b9e8f561371a439be"></a>RPC_AUTH_BADVERF&#160;</td><td class="fielddoc">
<p>bad verifier (seal broken) </p>
</td></tr>
<tr><td class="fieldname"><a class="anchor" id="a8d58c54a6681c71d4e1a0e6db138dbf6add147ac650df8205d3e7ef17bd64bfcc"></a>RPC_AUTH_REJECTEDVERF&#160;</td><td class="fielddoc">
<p>verifier expired or replayed </p>
</td></tr>
<tr><td class="fieldname"><a class="anchor" id="a8d58c54a6681c71d4e1a0e6db138dbf6a3146fe0506a5106301f5682e9edf9cfd"></a>RPC_AUTH_TOOWEAK&#160;</td><td class="fielddoc">
<p>rejected for security reasons </p>
</td></tr>
</table>

</div>
</div>
<a class="anchor" id="a041790daff41d0c8381c35ec5056c3ef"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">enum <a class="el" href="nfs_2rpc_8h.html#a041790daff41d0c8381c35ec5056c3ef">rpc_reject_stat</a></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Reasons why a call message was rejected. </p>
<table class="fieldtable">
<tr><th colspan="2">Enumerator</th></tr><tr><td class="fieldname"><a class="anchor" id="a041790daff41d0c8381c35ec5056c3efab50d5b255afbbfbf0c3d299f120020b9"></a>RPC_RPC_MISMATCH&#160;</td><td class="fielddoc">
<p>RPC version number != 2. </p>
</td></tr>
<tr><td class="fieldname"><a class="anchor" id="a041790daff41d0c8381c35ec5056c3efa5184507a7e0eeacb5705e8598d757552"></a>RPC_AUTH_ERROR&#160;</td><td class="fielddoc">
<p>remote can't authenticate caller </p>
</td></tr>
</table>

</div>
</div>
<a class="anchor" id="ac749ab21876c6c906fd6672a7be1df1f"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">enum <a class="el" href="nfs_2rpc_8h.html#ac749ab21876c6c906fd6672a7be1df1f">rpc_reply_stat</a></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>A reply to a call message can take on two forms: The message was either accepted or rejected. </p>

</div>
</div>
<h2 class="groupheader">Function Documentation</h2>
<a class="anchor" id="a02d683cbecdd595769603ef8e6dc6ecc"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">err_t rpc_call </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structrpc__client.html">rpc_client</a> *&#160;</td>
          <td class="paramname"><em>client</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint16_t&#160;</td>
          <td class="paramname"><em>port</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint32_t&#160;</td>
          <td class="paramname"><em>prog</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint32_t&#160;</td>
          <td class="paramname"><em>vers</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint32_t&#160;</td>
          <td class="paramname"><em>proc</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">xdrproc_t&#160;</td>
          <td class="paramname"><em>args_xdrproc</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">void *&#160;</td>
          <td class="paramname"><em>args</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">size_t&#160;</td>
          <td class="paramname"><em>args_size</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="nfs_2rpc_8h.html#ae6012b8944b126ce5271a3c31ebc38c0">rpc_callback_t</a>&#160;</td>
          <td class="paramname"><em>callback</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">void *&#160;</td>
          <td class="paramname"><em>cbarg1</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">void *&#160;</td>
          <td class="paramname"><em>cbarg2</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Initiate an RPC Call. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">client</td><td>RPC client, previously initialised by a call to <a class="el" href="rpc_8c.html#a48c296dbdbd498c70a67412dcc1f85ed" title="Initialise a new RPC client instance. ">rpc_init()</a> </td></tr>
    <tr><td class="paramname">port</td><td>UDP port on server to call </td></tr>
    <tr><td class="paramname">prog</td><td>RPC program number </td></tr>
    <tr><td class="paramname">vers</td><td>RPC program version </td></tr>
    <tr><td class="paramname">proc</td><td>RPC procedure number </td></tr>
    <tr><td class="paramname">args_xdrproc</td><td>XDR serialisation function for arguments to call </td></tr>
    <tr><td class="paramname">args</td><td>Argument data to be passed to #args_xdrproc </td></tr>
    <tr><td class="paramname">args_size</td><td>Upper bound on size of serialised argument data </td></tr>
    <tr><td class="paramname">callback</td><td>Callback function to be invoked when call either completes or fails </td></tr>
    <tr><td class="paramname">cbarg1,cbarg2</td><td>Opaque arguments to be passed to callback function</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>Error code (ERR_OK on success) </dd></dl>

</div>
</div>
<a class="anchor" id="a48c296dbdbd498c70a67412dcc1f85ed"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">err_t rpc_init </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structrpc__client.html">rpc_client</a> *&#160;</td>
          <td class="paramname"><em>client</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct ip_addr&#160;</td>
          <td class="paramname"><em>server</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Initialise a new RPC client instance. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">client</td><td>Pointer to memory for RPC client data, to be initialised </td></tr>
    <tr><td class="paramname">server</td><td>IP address of server to be called</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>Error code (ERR_OK on success) </dd></dl>

</div>
</div>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.11
</small></address>
</body>
</html>
