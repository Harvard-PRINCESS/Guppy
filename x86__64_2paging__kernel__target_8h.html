<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.11"/>
<title>Barrelfish: kernel/include/target/x86_64/paging_kernel_target.h File Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">Barrelfish
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.11 -->
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="modules.html"><span>Modules</span></a></li>
      <li><a href="annotated.html"><span>Data&#160;Structures</span></a></li>
      <li class="current"><a href="files.html"><span>Files</span></a></li>
    </ul>
  </div>
  <div id="navrow2" class="tabs2">
    <ul class="tablist">
      <li><a href="files.html"><span>File&#160;List</span></a></li>
      <li><a href="globals.html"><span>Globals</span></a></li>
    </ul>
  </div>
<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a class="el" href="dir_dc43877d82dd332f9fb2071fcca799d6.html">kernel</a></li><li class="navelem"><a class="el" href="dir_009f605b833ac4622acd6c3c0c26c0f0.html">include</a></li><li class="navelem"><a class="el" href="dir_891a2dd2d9ba19829dc14c879b117587.html">target</a></li><li class="navelem"><a class="el" href="dir_03e155790ae88852b0eb6ac5fae03045.html">x86_64</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#nested-classes">Data Structures</a> &#124;
<a href="#define-members">Macros</a> &#124;
<a href="#func-members">Functions</a>  </div>
  <div class="headertitle">
<div class="title">paging_kernel_target.h File Reference</div>  </div>
</div><!--header-->
<div class="contents">

<p>x86-64 kernel page-table structures.  
<a href="#details">More...</a></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="nested-classes"></a>
Data Structures</h2></td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">union &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="unionx86__64__pdir__entry.html">x86_64_pdir_entry</a></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">union &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="unionx86__64__ptable__entry.html">x86_64_ptable_entry</a></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="define-members"></a>
Macros</h2></td></tr>
<tr class="memitem:a75f847672721047e4a17297cf6780c38"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a75f847672721047e4a17297cf6780c38"></a>
#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="x86__64_2paging__kernel__target_8h.html#a75f847672721047e4a17297cf6780c38">X86_64_PTABLE_ACCESS_MASK</a></td></tr>
<tr class="memdesc:a75f847672721047e4a17297cf6780c38"><td class="mdescLeft">&#160;</td><td class="mdescRight">All flags valid for page access protection from user-space. <br /></td></tr>
<tr class="separator:a75f847672721047e4a17297cf6780c38"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a905a5c9af78090e0a0544acd99817eff"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a905a5c9af78090e0a0544acd99817eff"></a>
#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="x86__64_2paging__kernel__target_8h.html#a905a5c9af78090e0a0544acd99817eff">X86_64_PTABLE_FLAGS_MASK</a></td></tr>
<tr class="memdesc:a905a5c9af78090e0a0544acd99817eff"><td class="mdescLeft">&#160;</td><td class="mdescRight">All arch-specific flags valid to be set from user-space. <br /></td></tr>
<tr class="separator:a905a5c9af78090e0a0544acd99817eff"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a491a8700d6b96b594f95f9b70970f44e"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a491a8700d6b96b594f95f9b70970f44e"></a>
#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="x86__64_2paging__kernel__target_8h.html#a491a8700d6b96b594f95f9b70970f44e">X86_64_PTABLE_FLAGS</a>(flags)&#160;&#160;&#160;(flags &amp; <a class="el" href="x86__64_2paging__kernel__target_8h.html#a905a5c9af78090e0a0544acd99817eff">X86_64_PTABLE_FLAGS_MASK</a>)</td></tr>
<tr class="memdesc:a491a8700d6b96b594f95f9b70970f44e"><td class="mdescLeft">&#160;</td><td class="mdescRight">Mask out all arch-specific flags except those valid from user-space. <br /></td></tr>
<tr class="separator:a491a8700d6b96b594f95f9b70970f44e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa705433c67fe012fddf9f731d40cd29d"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="aa705433c67fe012fddf9f731d40cd29d"></a>
#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="x86__64_2paging__kernel__target_8h.html#aa705433c67fe012fddf9f731d40cd29d">X86_64_PTABLE_ACCESS</a>(flags)&#160;&#160;&#160;(flags &amp; <a class="el" href="x86__64_2paging__kernel__target_8h.html#a75f847672721047e4a17297cf6780c38">X86_64_PTABLE_ACCESS_MASK</a>)</td></tr>
<tr class="memdesc:aa705433c67fe012fddf9f731d40cd29d"><td class="mdescLeft">&#160;</td><td class="mdescRight">Mask out all flags except those for access protection. <br /></td></tr>
<tr class="separator:aa705433c67fe012fddf9f731d40cd29d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a4d4ca58a3daf6fdb6a67acf9d1bff124"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="x86__64_2paging__kernel__target_8h.html#a4d4ca58a3daf6fdb6a67acf9d1bff124">X86_64_IS_PRESENT</a>(entry)&#160;&#160;&#160;((*(uint64_t *)(entry)) &amp; X86_64_PTABLE_PRESENT)</td></tr>
<tr class="separator:a4d4ca58a3daf6fdb6a67acf9d1bff124"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:af962dfec67fc34333c746707319a8b96"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="x86__64_2paging__kernel__target_8h.html#af962dfec67fc34333c746707319a8b96">paging_x86_64_reset</a> (void)</td></tr>
<tr class="memdesc:af962dfec67fc34333c746707319a8b96"><td class="mdescLeft">&#160;</td><td class="mdescRight">Reset kernel paging.  <a href="#af962dfec67fc34333c746707319a8b96">More...</a><br /></td></tr>
<tr class="separator:af962dfec67fc34333c746707319a8b96"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a6fdcb0479e5626f22f7a7c642d0670eb"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="x86__64_2paging__kernel__target_8h.html#a6fdcb0479e5626f22f7a7c642d0670eb">paging_x86_64_make_good_pml4</a> (lpaddr_t base)</td></tr>
<tr class="memdesc:a6fdcb0479e5626f22f7a7c642d0670eb"><td class="mdescLeft">&#160;</td><td class="mdescRight">Make a "good" PML4 table out of a page table.  <a href="#a6fdcb0479e5626f22f7a7c642d0670eb">More...</a><br /></td></tr>
<tr class="separator:a6fdcb0479e5626f22f7a7c642d0670eb"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p>x86-64 kernel page-table structures. </p>
</div><h2 class="groupheader">Macro Definition Documentation</h2>
<a class="anchor" id="a4d4ca58a3daf6fdb6a67acf9d1bff124"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define X86_64_IS_PRESENT</td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname">entry</td><td>)</td>
          <td>&#160;&#160;&#160;((*(uint64_t *)(entry)) &amp; X86_64_PTABLE_PRESENT)</td>
        </tr>
      </table>
</div><div class="memdoc">
<p>True if page entry is present in memory </p>

</div>
</div>
<h2 class="groupheader">Function Documentation</h2>
<a class="anchor" id="a6fdcb0479e5626f22f7a7c642d0670eb"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void paging_x86_64_make_good_pml4 </td>
          <td>(</td>
          <td class="paramtype">lpaddr_t&#160;</td>
          <td class="paramname"><em>base</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Make a "good" PML4 table out of a page table. </p>
<p>A "good" PML4 table is one that has all physical address space and the kernel mapped in. This function modifies the passed PML4, based at physical address 'base' accordingly. It does this by taking out the corresponding entries of the kernel's pristine PML4 table.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">base</td><td>Physical base address of PML4 table to make "good". </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a class="anchor" id="af962dfec67fc34333c746707319a8b96"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void paging_x86_64_reset </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Reset kernel paging. </p>
<p>This function resets the page maps for kernel and memory-space. It clears out all other mappings. Use this only at system bootup! </p>

</div>
</div>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.11
</small></address>
</body>
</html>
