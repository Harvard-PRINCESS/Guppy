<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.11"/>
<title>Barrelfish: lib/octopus/client/locking.c File Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">Barrelfish
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.11 -->
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="modules.html"><span>Modules</span></a></li>
      <li><a href="annotated.html"><span>Data&#160;Structures</span></a></li>
      <li class="current"><a href="files.html"><span>Files</span></a></li>
    </ul>
  </div>
  <div id="navrow2" class="tabs2">
    <ul class="tablist">
      <li><a href="files.html"><span>File&#160;List</span></a></li>
      <li><a href="globals.html"><span>Globals</span></a></li>
    </ul>
  </div>
<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a class="el" href="dir_97aefd0d527b934f1d99a682da8fe6a9.html">lib</a></li><li class="navelem"><a class="el" href="dir_61b0ad2557f1335b5d6109ede4d42ac4.html">octopus</a></li><li class="navelem"><a class="el" href="dir_c6e2e9d3dd8f9b3a5d7719b6fcde3b20.html">client</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#func-members">Functions</a>  </div>
  <div class="headertitle">
<div class="title">locking.c File Reference</div>  </div>
</div><!--header-->
<div class="contents">

<p>Implementation of a synchronous locking API using the octopus Interface.  
<a href="#details">More...</a></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:a9330040827f01f907de6db2b7409b394"><td class="memItemLeft" align="right" valign="top">errval_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="locking_8c.html#a9330040827f01f907de6db2b7409b394">oct_lock</a> (const char *lock_name, char **lock_record)</td></tr>
<tr class="memdesc:a9330040827f01f907de6db2b7409b394"><td class="mdescLeft">&#160;</td><td class="mdescRight">Synchronous locking function.  <a href="#a9330040827f01f907de6db2b7409b394">More...</a><br /></td></tr>
<tr class="separator:a9330040827f01f907de6db2b7409b394"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a27538499009d0a084cbfe501a839578d"><td class="memItemLeft" align="right" valign="top">errval_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="locking_8c.html#a27538499009d0a084cbfe501a839578d">oct_unlock</a> (const char *lock_record)</td></tr>
<tr class="memdesc:a27538499009d0a084cbfe501a839578d"><td class="mdescLeft">&#160;</td><td class="mdescRight">Synchronous unlock function.  <a href="#a27538499009d0a084cbfe501a839578d">More...</a><br /></td></tr>
<tr class="separator:a27538499009d0a084cbfe501a839578d"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p>Implementation of a synchronous locking API using the octopus Interface. </p>
</div><h2 class="groupheader">Function Documentation</h2>
<a class="anchor" id="a9330040827f01f907de6db2b7409b394"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">errval_t oct_lock </td>
          <td>(</td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>lock_name</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">char **&#160;</td>
          <td class="paramname"><em>lock_record</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Synchronous locking function. </p>
<p>The lock function will create a new record based on the lock name using sequential set mode. This means we create a queue of records with all parties that want to acquire the lock. The lock owner is the one with the lowest sequence appended to its name. Once the lock owner deletes its lock_record the next client in the queue is notified through triggers.</p>
<dl class="section note"><dt>Note</dt><dd>Once a client holds the lock it can be released using oct_unlock.</dd></dl>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">lock_name</td><td>Name to identify the lock. </td></tr>
    <tr><td class="paramdir">[out]</td><td class="paramname">lock_record</td><td>Your current lock record in the queue. Client needs to free this. </td></tr>
  </table>
  </dd>
</dl>
<p>XXX why is there a strdup ? </p>

</div>
</div>
<a class="anchor" id="a27538499009d0a084cbfe501a839578d"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">errval_t oct_unlock </td>
          <td>(</td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>lock_record</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Synchronous unlock function. </p>
<p>Deletes the given lock_record in on the server.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">lock_record</td><td>Record provided by oct_lock. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.11
</small></address>
</body>
</html>
