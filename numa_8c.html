<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.11"/>
<title>Barrelfish: lib/numa/numa.c File Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">Barrelfish
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.11 -->
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="modules.html"><span>Modules</span></a></li>
      <li><a href="annotated.html"><span>Data&#160;Structures</span></a></li>
      <li class="current"><a href="files.html"><span>Files</span></a></li>
    </ul>
  </div>
  <div id="navrow2" class="tabs2">
    <ul class="tablist">
      <li><a href="files.html"><span>File&#160;List</span></a></li>
      <li><a href="globals.html"><span>Globals</span></a></li>
    </ul>
  </div>
<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a class="el" href="dir_97aefd0d527b934f1d99a682da8fe6a9.html">lib</a></li><li class="navelem"><a class="el" href="dir_0432dbf0297315a55d3bd771504e8ad0.html">numa</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#func-members">Functions</a> &#124;
<a href="#var-members">Variables</a>  </div>
  <div class="headertitle">
<div class="title">numa.c File Reference</div>  </div>
</div><!--header-->
<div class="contents">

<p>General Numa functions.  
<a href="#details">More...</a></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:a13aab9351af8516c1763e02a175eca6b"><td class="memItemLeft" align="right" valign="top">errval_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="numa_8c.html#a13aab9351af8516c1763e02a175eca6b">numa_available</a> (void)</td></tr>
<tr class="memdesc:a13aab9351af8516c1763e02a175eca6b"><td class="mdescLeft">&#160;</td><td class="mdescRight">checks if numa support is available  <a href="#a13aab9351af8516c1763e02a175eca6b">More...</a><br /></td></tr>
<tr class="separator:a13aab9351af8516c1763e02a175eca6b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a6250a0f165beb6f960a48eeec329d65d"><td class="memItemLeft" align="right" valign="top">nodeid_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="numa_8c.html#a6250a0f165beb6f960a48eeec329d65d">numa_max_node</a> (void)</td></tr>
<tr class="memdesc:a6250a0f165beb6f960a48eeec329d65d"><td class="mdescLeft">&#160;</td><td class="mdescRight">returns the highest node number available on the current system.  <a href="#a6250a0f165beb6f960a48eeec329d65d">More...</a><br /></td></tr>
<tr class="separator:a6250a0f165beb6f960a48eeec329d65d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a15b30d8531b6205e2499f200d2cfaf8e"><td class="memItemLeft" align="right" valign="top">coreid_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="numa_8c.html#a15b30d8531b6205e2499f200d2cfaf8e">numa_max_core</a> (void)</td></tr>
<tr class="memdesc:a15b30d8531b6205e2499f200d2cfaf8e"><td class="mdescLeft">&#160;</td><td class="mdescRight">returns the highest ID of the present cores  <a href="#a15b30d8531b6205e2499f200d2cfaf8e">More...</a><br /></td></tr>
<tr class="separator:a15b30d8531b6205e2499f200d2cfaf8e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a0ad28d8439169ef189adfb8baf1db42c"><td class="memItemLeft" align="right" valign="top">nodeid_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="numa_8c.html#a0ad28d8439169ef189adfb8baf1db42c">numa_current_node</a> (void)</td></tr>
<tr class="memdesc:a0ad28d8439169ef189adfb8baf1db42c"><td class="mdescLeft">&#160;</td><td class="mdescRight">returns the current node the domain is running on  <a href="#a0ad28d8439169ef189adfb8baf1db42c">More...</a><br /></td></tr>
<tr class="separator:a0ad28d8439169ef189adfb8baf1db42c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a53d194154604d58b25c907745aca1143"><td class="memItemLeft" align="right" valign="top">nodeid_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="numa_8c.html#a53d194154604d58b25c907745aca1143">numa_num_possible_nodes</a> (void)</td></tr>
<tr class="memdesc:a53d194154604d58b25c907745aca1143"><td class="mdescLeft">&#160;</td><td class="mdescRight">returns the size of the node mask  <a href="#a53d194154604d58b25c907745aca1143">More...</a><br /></td></tr>
<tr class="separator:a53d194154604d58b25c907745aca1143"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a925b757db9361d3dc3035fa80d019e6a"><td class="memItemLeft" align="right" valign="top">nodeid_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="numa_8c.html#a925b757db9361d3dc3035fa80d019e6a">numa_num_configured_nodes</a> (void)</td></tr>
<tr class="memdesc:a925b757db9361d3dc3035fa80d019e6a"><td class="mdescLeft">&#160;</td><td class="mdescRight">Obtains the number of all memory nodes in the system.  <a href="#a925b757db9361d3dc3035fa80d019e6a">More...</a><br /></td></tr>
<tr class="separator:a925b757db9361d3dc3035fa80d019e6a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae1ddb8059c8b27647d73e0994d2ff6da"><td class="memItemLeft" align="right" valign="top">struct bitmap *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="numa_8c.html#ae1ddb8059c8b27647d73e0994d2ff6da">numa_get_mems_allowed</a> (void)</td></tr>
<tr class="memdesc:ae1ddb8059c8b27647d73e0994d2ff6da"><td class="mdescLeft">&#160;</td><td class="mdescRight">obtains the nodes the domain is allowed to allocate memory from  <a href="#ae1ddb8059c8b27647d73e0994d2ff6da">More...</a><br /></td></tr>
<tr class="separator:ae1ddb8059c8b27647d73e0994d2ff6da"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a4e07ec100973905666625bd87445cbf1"><td class="memItemLeft" align="right" valign="top">coreid_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="numa_8c.html#a4e07ec100973905666625bd87445cbf1">numa_num_configured_cpus</a> (void)</td></tr>
<tr class="memdesc:a4e07ec100973905666625bd87445cbf1"><td class="mdescLeft">&#160;</td><td class="mdescRight">returns the total numberof CPUs in the system  <a href="#a4e07ec100973905666625bd87445cbf1">More...</a><br /></td></tr>
<tr class="separator:a4e07ec100973905666625bd87445cbf1"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a841103c17ae0296b1e26d675dbd2cd38"><td class="memItemLeft" align="right" valign="top">coreid_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="numa_8c.html#a841103c17ae0296b1e26d675dbd2cd38">numa_num_task_cpus</a> (void)</td></tr>
<tr class="memdesc:a841103c17ae0296b1e26d675dbd2cd38"><td class="mdescLeft">&#160;</td><td class="mdescRight">returns the number of cpus that the calling domain is allowed to use.  <a href="#a841103c17ae0296b1e26d675dbd2cd38">More...</a><br /></td></tr>
<tr class="separator:a841103c17ae0296b1e26d675dbd2cd38"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af3c6d92331deff801004a2726312a6de"><td class="memItemLeft" align="right" valign="top">nodeid_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="numa_8c.html#af3c6d92331deff801004a2726312a6de">numa_num_task_nodes</a> (void)</td></tr>
<tr class="memdesc:af3c6d92331deff801004a2726312a6de"><td class="mdescLeft">&#160;</td><td class="mdescRight">returns the number of nodes on which the calling domain is allowed to allocate memory  <a href="#af3c6d92331deff801004a2726312a6de">More...</a><br /></td></tr>
<tr class="separator:af3c6d92331deff801004a2726312a6de"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a5643014e5aefb12eba6368afde85e76f"><td class="memItemLeft" align="right" valign="top">size_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="numa_8c.html#a5643014e5aefb12eba6368afde85e76f">numa_node_size</a> (nodeid_t node, uintptr_t *freep)</td></tr>
<tr class="memdesc:a5643014e5aefb12eba6368afde85e76f"><td class="mdescLeft">&#160;</td><td class="mdescRight">obtains the size of a node  <a href="#a5643014e5aefb12eba6368afde85e76f">More...</a><br /></td></tr>
<tr class="separator:a5643014e5aefb12eba6368afde85e76f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a310bf8d9e0d7370c2edce74ca4fba972"><td class="memItemLeft" align="right" valign="top">lpaddr_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="numa_8c.html#a310bf8d9e0d7370c2edce74ca4fba972">numa_node_base</a> (nodeid_t node)</td></tr>
<tr class="memdesc:a310bf8d9e0d7370c2edce74ca4fba972"><td class="mdescLeft">&#160;</td><td class="mdescRight">obtains the base address of the numa node  <a href="#a310bf8d9e0d7370c2edce74ca4fba972">More...</a><br /></td></tr>
<tr class="separator:a310bf8d9e0d7370c2edce74ca4fba972"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a7485ad57e538dad021aaed704f742f8a"><td class="memItemLeft" align="right" valign="top">nodeid_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="numa_8c.html#a7485ad57e538dad021aaed704f742f8a">numa_preferred</a> (void)</td></tr>
<tr class="memdesc:a7485ad57e538dad021aaed704f742f8a"><td class="mdescLeft">&#160;</td><td class="mdescRight">returns the preferred node of the current task.  <a href="#a7485ad57e538dad021aaed704f742f8a">More...</a><br /></td></tr>
<tr class="separator:a7485ad57e538dad021aaed704f742f8a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a3bfe6513e958b53670773c66e803942c"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="numa_8c.html#a3bfe6513e958b53670773c66e803942c">numa_set_preferred</a> (nodeid_t node)</td></tr>
<tr class="memdesc:a3bfe6513e958b53670773c66e803942c"><td class="mdescLeft">&#160;</td><td class="mdescRight">sets the preferred node for the current task to node  <a href="#a3bfe6513e958b53670773c66e803942c">More...</a><br /></td></tr>
<tr class="separator:a3bfe6513e958b53670773c66e803942c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab536a7c9a8fd406dce6ec5d5b6a0b5cd"><td class="memItemLeft" align="right" valign="top">errval_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="numa_8c.html#ab536a7c9a8fd406dce6ec5d5b6a0b5cd">numa_run_on_node</a> (nodeid_t node)</td></tr>
<tr class="memdesc:ab536a7c9a8fd406dce6ec5d5b6a0b5cd"><td class="mdescLeft">&#160;</td><td class="mdescRight">runs the current domain on a specific node.  <a href="#ab536a7c9a8fd406dce6ec5d5b6a0b5cd">More...</a><br /></td></tr>
<tr class="separator:ab536a7c9a8fd406dce6ec5d5b6a0b5cd"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad0b30a5e75cdc6a864d6801434d332bb"><td class="memItemLeft" align="right" valign="top">errval_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="numa_8c.html#ad0b30a5e75cdc6a864d6801434d332bb">numa_run_on_node_mask</a> (struct bitmap *nodemask)</td></tr>
<tr class="memdesc:ad0b30a5e75cdc6a864d6801434d332bb"><td class="mdescLeft">&#160;</td><td class="mdescRight">runs the current domain only on nodes specified in nodemask.  <a href="#ad0b30a5e75cdc6a864d6801434d332bb">More...</a><br /></td></tr>
<tr class="separator:ad0b30a5e75cdc6a864d6801434d332bb"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a599d667326886592bf31dcbac927f62f"><td class="memItemLeft" align="right" valign="top">struct bitmap *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="numa_8c.html#a599d667326886592bf31dcbac927f62f">numa_get_run_node_mask</a> (void)</td></tr>
<tr class="memdesc:a599d667326886592bf31dcbac927f62f"><td class="mdescLeft">&#160;</td><td class="mdescRight">returns a mask of CPUs on which the current task is allowed to run.  <a href="#a599d667326886592bf31dcbac927f62f">More...</a><br /></td></tr>
<tr class="separator:a599d667326886592bf31dcbac927f62f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad032bb2992091e05ae5c61aca6f902b0"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="numa_8c.html#ad032bb2992091e05ae5c61aca6f902b0">numa_set_bind_policy</a> (<a class="el" href="numa_8h.html#a1a08fd9e9d2bc74a52122b6142a09740">numa_policy_t</a> strict)</td></tr>
<tr class="memdesc:ad032bb2992091e05ae5c61aca6f902b0"><td class="mdescLeft">&#160;</td><td class="mdescRight">specify the memory bind policy  <a href="#ad032bb2992091e05ae5c61aca6f902b0">More...</a><br /></td></tr>
<tr class="separator:ad032bb2992091e05ae5c61aca6f902b0"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a8ac29d7b257c787bc1768f6ef6151487"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="numa_8c.html#a8ac29d7b257c787bc1768f6ef6151487">numa_set_strict</a> (<a class="el" href="numa_8h.html#a1a08fd9e9d2bc74a52122b6142a09740">numa_policy_t</a> strict)</td></tr>
<tr class="memdesc:a8ac29d7b257c787bc1768f6ef6151487"><td class="mdescLeft">&#160;</td><td class="mdescRight">enable or disable the strict allocation policy  <a href="#a8ac29d7b257c787bc1768f6ef6151487">More...</a><br /></td></tr>
<tr class="separator:a8ac29d7b257c787bc1768f6ef6151487"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae0136be61b635e497141e0a975efb931"><td class="memItemLeft" align="right" valign="top">uint32_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="numa_8c.html#ae0136be61b635e497141e0a975efb931">numa_distance</a> (nodeid_t from, nodeid_t to)</td></tr>
<tr class="memdesc:ae0136be61b635e497141e0a975efb931"><td class="mdescLeft">&#160;</td><td class="mdescRight">reports the distance in the machine topology between two nodes  <a href="#ae0136be61b635e497141e0a975efb931">More...</a><br /></td></tr>
<tr class="separator:ae0136be61b635e497141e0a975efb931"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a6a534efeb1fdf6965725f260e2a04426"><td class="memItemLeft" align="right" valign="top">errval_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="numa_8c.html#a6a534efeb1fdf6965725f260e2a04426">numa_sched_getaffinity</a> (domainid_t did, struct bitmap *mask)</td></tr>
<tr class="memdesc:a6a534efeb1fdf6965725f260e2a04426"><td class="mdescLeft">&#160;</td><td class="mdescRight">retrieves a bitmask of the cpus on which a domain may run  <a href="#a6a534efeb1fdf6965725f260e2a04426">More...</a><br /></td></tr>
<tr class="separator:a6a534efeb1fdf6965725f260e2a04426"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:afb2dfcff1f36a11ff4d93fb05409d24d"><td class="memItemLeft" align="right" valign="top">errval_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="numa_8c.html#afb2dfcff1f36a11ff4d93fb05409d24d">numa_sched_setaffinity</a> (domainid_t did, struct bitmap *mask)</td></tr>
<tr class="memdesc:afb2dfcff1f36a11ff4d93fb05409d24d"><td class="mdescLeft">&#160;</td><td class="mdescRight">sets a domain's allowed cpu's to those cpu's specified in mask.  <a href="#afb2dfcff1f36a11ff4d93fb05409d24d">More...</a><br /></td></tr>
<tr class="separator:afb2dfcff1f36a11ff4d93fb05409d24d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a513a087c427fdfdbb8510faa7a8f8af8"><td class="memItemLeft" align="right" valign="top">size_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="numa_8c.html#a513a087c427fdfdbb8510faa7a8f8af8">numa_pagesize</a> (void)</td></tr>
<tr class="memdesc:a513a087c427fdfdbb8510faa7a8f8af8"><td class="mdescLeft">&#160;</td><td class="mdescRight">returns the page size  <a href="#a513a087c427fdfdbb8510faa7a8f8af8">More...</a><br /></td></tr>
<tr class="separator:a513a087c427fdfdbb8510faa7a8f8af8"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a305bad31ff914f41339eec5243b97044"><td class="memItemLeft" align="right" valign="top">errval_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="numa_8c.html#a305bad31ff914f41339eec5243b97044">numa_node_to_cpus</a> (nodeid_t node, struct bitmap *mask)</td></tr>
<tr class="memdesc:a305bad31ff914f41339eec5243b97044"><td class="mdescLeft">&#160;</td><td class="mdescRight">converts a node number to a bitmask of CPUs  <a href="#a305bad31ff914f41339eec5243b97044">More...</a><br /></td></tr>
<tr class="separator:a305bad31ff914f41339eec5243b97044"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad122c91b4830995004e08fc1390cfcdb"><td class="memItemLeft" align="right" valign="top">nodeid_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="numa_8c.html#ad122c91b4830995004e08fc1390cfcdb">numa_node_of_cpu</a> (coreid_t cpu)</td></tr>
<tr class="memdesc:ad122c91b4830995004e08fc1390cfcdb"><td class="mdescLeft">&#160;</td><td class="mdescRight">returns the node that a cpu belongs to  <a href="#ad122c91b4830995004e08fc1390cfcdb">More...</a><br /></td></tr>
<tr class="separator:ad122c91b4830995004e08fc1390cfcdb"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a4cc73f3c47d5c97040e9ca1223bd11fb"><td class="memItemLeft" align="right" valign="top">coreid_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="numa_8c.html#a4cc73f3c47d5c97040e9ca1223bd11fb">numa_num_node_cpus</a> (nodeid_t node)</td></tr>
<tr class="memdesc:a4cc73f3c47d5c97040e9ca1223bd11fb"><td class="mdescLeft">&#160;</td><td class="mdescRight">gets the number of cores for the given numa node  <a href="#a4cc73f3c47d5c97040e9ca1223bd11fb">More...</a><br /></td></tr>
<tr class="separator:a4cc73f3c47d5c97040e9ca1223bd11fb"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="var-members"></a>
Variables</h2></td></tr>
<tr class="memitem:a854c7059f7302dfdf7a64ea5032af586"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a854c7059f7302dfdf7a64ea5032af586"></a>
struct bitmap *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="numa_8c.html#a854c7059f7302dfdf7a64ea5032af586">numa_all_nodes_ptr</a></td></tr>
<tr class="memdesc:a854c7059f7302dfdf7a64ea5032af586"><td class="mdescLeft">&#160;</td><td class="mdescRight">bitmask that is allocated by the library with bits representing all nodes on which the calling task may allocate memory. <br /></td></tr>
<tr class="separator:a854c7059f7302dfdf7a64ea5032af586"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a5f1c993f2aee4f105e3434dc3235149a"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a5f1c993f2aee4f105e3434dc3235149a"></a>
struct bitmap *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="numa_8c.html#a5f1c993f2aee4f105e3434dc3235149a">numa_no_nodes_ptr</a></td></tr>
<tr class="memdesc:a5f1c993f2aee4f105e3434dc3235149a"><td class="mdescLeft">&#160;</td><td class="mdescRight">points to a bitmask that is allocated by the library and left all zeroes. <br /></td></tr>
<tr class="separator:a5f1c993f2aee4f105e3434dc3235149a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a816f78a09ae8da64af38fe360cc1da95"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a816f78a09ae8da64af38fe360cc1da95"></a>
struct bitmap *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="numa_8c.html#a816f78a09ae8da64af38fe360cc1da95">numa_all_cpus_ptr</a></td></tr>
<tr class="memdesc:a816f78a09ae8da64af38fe360cc1da95"><td class="mdescLeft">&#160;</td><td class="mdescRight">points to a bitmask that is allocated by the library with bits representing all cpus on which the calling task may execute. <br /></td></tr>
<tr class="separator:a816f78a09ae8da64af38fe360cc1da95"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:acae48f4b70a1ee069dc2dc6da5191401"><td class="memItemLeft" align="right" valign="top">struct <a class="el" href="structnuma__topology.html">numa_topology</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="numa_8c.html#acae48f4b70a1ee069dc2dc6da5191401">numa_topology</a></td></tr>
<tr class="memdesc:acae48f4b70a1ee069dc2dc6da5191401"><td class="mdescLeft">&#160;</td><td class="mdescRight">data structure representing the numa topology  <a href="#acae48f4b70a1ee069dc2dc6da5191401">More...</a><br /></td></tr>
<tr class="separator:acae48f4b70a1ee069dc2dc6da5191401"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p>General Numa functions. </p>
</div><h2 class="groupheader">Function Documentation</h2>
<a class="anchor" id="a13aab9351af8516c1763e02a175eca6b"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">errval_t numa_available </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>checks if numa support is available </p>
<dl class="section return"><dt>Returns</dt><dd>NUMA_ERR_NOT_AVAILABLE value all other functions are undefined SYS_ERR_OK: NUMA functionality is available</dd></dl>
<p>this function must be called before any of the other functions of libnuma. during the call to numa_available the library also gets initialized </p>

</div>
</div>
<a class="anchor" id="a0ad28d8439169ef189adfb8baf1db42c"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">nodeid_t numa_current_node </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>returns the current node the domain is running on </p>
<dl class="section return"><dt>Returns</dt><dd>ID of the current node </dd></dl>

</div>
</div>
<a class="anchor" id="ae0136be61b635e497141e0a975efb931"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">uint32_t numa_distance </td>
          <td>(</td>
          <td class="paramtype">nodeid_t&#160;</td>
          <td class="paramname"><em>from</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">nodeid_t&#160;</td>
          <td class="paramname"><em>to</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>reports the distance in the machine topology between two nodes </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">from</td><td>source node to measure the distance </td></tr>
    <tr><td class="paramname">to</td><td>target node to measure the distance</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>distance between two nodes 0 iff cannot be deterimed</dd></dl>
<p>The factors are a multiple of 10. A node has distance 10 to itself. </p>

</div>
</div>
<a class="anchor" id="ae1ddb8059c8b27647d73e0994d2ff6da"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">struct bitmap* numa_get_mems_allowed </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>obtains the nodes the domain is allowed to allocate memory from </p>
<dl class="section return"><dt>Returns</dt><dd>bitmask representing the allowing nodes</dd></dl>
<p>returns the mask of nodes from which the process is allowed to allocate memory in it's current cpuset context. </p>

</div>
</div>
<a class="anchor" id="a599d667326886592bf31dcbac927f62f"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">struct bitmap* numa_get_run_node_mask </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>returns a mask of CPUs on which the current task is allowed to run. </p>
<dl class="section return"><dt>Returns</dt><dd>bitmap represening the coreids the domain is allowed to run </dd></dl>

</div>
</div>
<a class="anchor" id="a15b30d8531b6205e2499f200d2cfaf8e"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">coreid_t numa_max_core </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>returns the highest ID of the present cores </p>
<dl class="section return"><dt>Returns</dt><dd>the maximum number of cores in the system </dd></dl>

</div>
</div>
<a class="anchor" id="a6250a0f165beb6f960a48eeec329d65d"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">nodeid_t numa_max_node </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>returns the highest node number available on the current system. </p>
<dl class="section return"><dt>Returns</dt><dd>ID of the max NUMA node </dd></dl>

</div>
</div>
<a class="anchor" id="a310bf8d9e0d7370c2edce74ca4fba972"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">lpaddr_t numa_node_base </td>
          <td>(</td>
          <td class="paramtype">nodeid_t&#160;</td>
          <td class="paramname"><em>node</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>obtains the base address of the numa node </p>
<dl class="section return"><dt>Returns</dt><dd>physical address of the start of the numa node NUMA_NODE_INVALID if the node does not exist </dd></dl>

</div>
</div>
<a class="anchor" id="ad122c91b4830995004e08fc1390cfcdb"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">nodeid_t numa_node_of_cpu </td>
          <td>(</td>
          <td class="paramtype">coreid_t&#160;</td>
          <td class="paramname"><em>cpu</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>returns the node that a cpu belongs to </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">cpu</td><td>ID of the core</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>node ID on SUCCESS NUMA_NODE_INVALID on FAILURE </dd></dl>

</div>
</div>
<a class="anchor" id="a5643014e5aefb12eba6368afde85e76f"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">size_t numa_node_size </td>
          <td>(</td>
          <td class="paramtype">nodeid_t&#160;</td>
          <td class="paramname"><em>node</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uintptr_t *&#160;</td>
          <td class="paramname"><em>freep</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>obtains the size of a node </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">node</td><td>ID of the NUMA node </td></tr>
    <tr><td class="paramname">freep</td><td>returns the number of available bytes of the node</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>size of the node in bytes</dd></dl>
<p>returns the memory size of a node. If the argument freep is not NULL, it used to return the amount of free memory on the node. On error it returns NUMA_NODE_INVALID </p>

</div>
</div>
<a class="anchor" id="a305bad31ff914f41339eec5243b97044"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">errval_t numa_node_to_cpus </td>
          <td>(</td>
          <td class="paramtype">nodeid_t&#160;</td>
          <td class="paramname"><em>node</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct bitmap *&#160;</td>
          <td class="paramname"><em>mask</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>converts a node number to a bitmask of CPUs </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">node</td><td>the ID of the node </td></tr>
    <tr><td class="paramname">mask</td><td>bitmap representing the CPUs of this node</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>SYS_ERR_OK on SUCCESS NUMA_ERR_BITMAP_RANGE on FAILURE (too small bitmap)</dd></dl>
<p>The user must pass a bitmask structure with a mask buffer long enough to represent all possible cpu's </p>

</div>
</div>
<a class="anchor" id="a4e07ec100973905666625bd87445cbf1"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">coreid_t numa_num_configured_cpus </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>returns the total numberof CPUs in the system </p>
<dl class="section return"><dt>Returns</dt><dd>total number of CPUs in the system</dd></dl>
<p>returns the number of cpus in the system. This count includes any cpus that are currently disabled. </p>

</div>
</div>
<a class="anchor" id="a925b757db9361d3dc3035fa80d019e6a"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">nodeid_t numa_num_configured_nodes </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Obtains the number of all memory nodes in the system. </p>
<dl class="section return"><dt>Returns</dt><dd>number of memory nodes in the system</dd></dl>
<p>returns the number of memory nodes in the system. This count includes any nodes that are currently disabled. </p>

</div>
</div>
<a class="anchor" id="a4cc73f3c47d5c97040e9ca1223bd11fb"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">coreid_t numa_num_node_cpus </td>
          <td>(</td>
          <td class="paramtype">nodeid_t&#160;</td>
          <td class="paramname"><em>node</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>gets the number of cores for the given numa node </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">node</td><td>NUMA node to get the number of cores</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>number of cores for the node </dd></dl>

</div>
</div>
<a class="anchor" id="a53d194154604d58b25c907745aca1143"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">nodeid_t numa_num_possible_nodes </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>returns the size of the node mask </p>
<dl class="section return"><dt>Returns</dt><dd>size of the node mask </dd></dl>

</div>
</div>
<a class="anchor" id="a841103c17ae0296b1e26d675dbd2cd38"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">coreid_t numa_num_task_cpus </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>returns the number of cpus that the calling domain is allowed to use. </p>
<dl class="section return"><dt>Returns</dt><dd>number of CPUs the domain is allowed to use </dd></dl>

</div>
</div>
<a class="anchor" id="af3c6d92331deff801004a2726312a6de"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">nodeid_t numa_num_task_nodes </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>returns the number of nodes on which the calling domain is allowed to allocate memory </p>
<dl class="section return"><dt>Returns</dt><dd>number of nodes the domain is allowed to use </dd></dl>

</div>
</div>
<a class="anchor" id="a513a087c427fdfdbb8510faa7a8f8af8"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">size_t numa_pagesize </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>returns the page size </p>
<dl class="section return"><dt>Returns</dt><dd>the number of bytes in a page </dd></dl>

</div>
</div>
<a class="anchor" id="a7485ad57e538dad021aaed704f742f8a"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">nodeid_t numa_preferred </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>returns the preferred node of the current task. </p>
<dl class="section return"><dt>Returns</dt><dd>node ID where memory is preferably allocated </dd></dl>

</div>
</div>
<a class="anchor" id="ab536a7c9a8fd406dce6ec5d5b6a0b5cd"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">errval_t numa_run_on_node </td>
          <td>(</td>
          <td class="paramtype">nodeid_t&#160;</td>
          <td class="paramname"><em>node</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>runs the current domain on a specific node. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">node</td><td>ID of the node to run the domain on</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>SYS_ERR_OK on SUCCESS errval on FAILURE</dd></dl>
<p>Passing -1 permits the kernel to schedule on all nodes again </p>

</div>
</div>
<a class="anchor" id="ad0b30a5e75cdc6a864d6801434d332bb"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">errval_t numa_run_on_node_mask </td>
          <td>(</td>
          <td class="paramtype">struct bitmap *&#160;</td>
          <td class="paramname"><em>nodemask</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>runs the current domain only on nodes specified in nodemask. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">nodemask</td><td>bitmap representing the nodes to run the domain on</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>SYS_ERR_OK on SUCCESS errval on FAILURE </dd></dl>

</div>
</div>
<a class="anchor" id="a6a534efeb1fdf6965725f260e2a04426"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">errval_t numa_sched_getaffinity </td>
          <td>(</td>
          <td class="paramtype">domainid_t&#160;</td>
          <td class="paramname"><em>did</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct bitmap *&#160;</td>
          <td class="paramname"><em>mask</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>retrieves a bitmask of the cpus on which a domain may run </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">did</td><td>domain ID </td></tr>
    <tr><td class="paramname">mask</td><td>returned bitmask</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>SYS_ERR_OK on success errval on FAILURE </dd></dl>

</div>
</div>
<a class="anchor" id="afb2dfcff1f36a11ff4d93fb05409d24d"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">errval_t numa_sched_setaffinity </td>
          <td>(</td>
          <td class="paramtype">domainid_t&#160;</td>
          <td class="paramname"><em>did</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct bitmap *&#160;</td>
          <td class="paramname"><em>mask</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>sets a domain's allowed cpu's to those cpu's specified in mask. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">did</td><td>domain ID </td></tr>
    <tr><td class="paramname">mask</td><td>bitmap representing the CPUs</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>SYS_ERR_OK on success errval on FAILURE </dd></dl>

</div>
</div>
<a class="anchor" id="ad032bb2992091e05ae5c61aca6f902b0"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void numa_set_bind_policy </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="numa_8h.html#a1a08fd9e9d2bc74a52122b6142a09740">numa_policy_t</a>&#160;</td>
          <td class="paramname"><em>strict</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>specify the memory bind policy </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">strict</td><td>numa policy to apply</td></tr>
  </table>
  </dd>
</dl>
<p>specifies whether calls that bind memory to a specific node should use the preferred policy or a strict policy. </p>

</div>
</div>
<a class="anchor" id="a3bfe6513e958b53670773c66e803942c"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void numa_set_preferred </td>
          <td>(</td>
          <td class="paramtype">nodeid_t&#160;</td>
          <td class="paramname"><em>node</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>sets the preferred node for the current task to node </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">node</td><td>ID of the node to set preferred</td></tr>
  </table>
  </dd>
</dl>
<p>The system will attempt to allocate memory from the preferred node, but will fall back to other nodes if no memory is available on the the preferred node</p>
<p>Passing a node of -1 argument specifies local allocation </p>

</div>
</div>
<a class="anchor" id="a8ac29d7b257c787bc1768f6ef6151487"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void numa_set_strict </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="numa_8h.html#a1a08fd9e9d2bc74a52122b6142a09740">numa_policy_t</a>&#160;</td>
          <td class="paramname"><em>strict</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>enable or disable the strict allocation policy </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">strict</td><td>numa policy to apply</td></tr>
  </table>
  </dd>
</dl>
<p>s a flag that says whether the functions allocating on specific nodes should use a strict policy. Strict means the allocation will fail if the memory cannot be allocated on the target node. </p>

</div>
</div>
<h2 class="groupheader">Variable Documentation</h2>
<a class="anchor" id="acae48f4b70a1ee069dc2dc6da5191401"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">struct <a class="el" href="structnuma__topology.html">numa_topology</a> <a class="el" href="structnuma__topology.html">numa_topology</a></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>data structure representing the numa topology </p>
<p>numa interleave mask for allocations </p>

</div>
</div>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.11
</small></address>
</body>
</html>
