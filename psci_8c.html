<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.11"/>
<title>Barrelfish: kernel/arch/armv8/psci.c File Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">Barrelfish
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.11 -->
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="modules.html"><span>Modules</span></a></li>
      <li><a href="annotated.html"><span>Data&#160;Structures</span></a></li>
      <li class="current"><a href="files.html"><span>Files</span></a></li>
    </ul>
  </div>
  <div id="navrow2" class="tabs2">
    <ul class="tablist">
      <li><a href="files.html"><span>File&#160;List</span></a></li>
      <li><a href="globals.html"><span>Globals</span></a></li>
    </ul>
  </div>
<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a class="el" href="dir_dc43877d82dd332f9fb2071fcca799d6.html">kernel</a></li><li class="navelem"><a class="el" href="dir_4a04b9aac4eefdd334a78e565f4616f2.html">arch</a></li><li class="navelem"><a class="el" href="dir_edf3ab465807aea9af1c7ae7c2065d2c.html">armv8</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#func-members">Functions</a>  </div>
  <div class="headertitle">
<div class="title">psci.c File Reference</div>  </div>
</div><!--header-->
<div class="contents">
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:acce22fef786511b55b2be5c2a9716277"><td class="memItemLeft" align="right" valign="top">errval_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="psci_8c.html#acce22fef786511b55b2be5c2a9716277">psci_version</a> (uint16_t *major, uint16_t *minor)</td></tr>
<tr class="memdesc:acce22fef786511b55b2be5c2a9716277"><td class="mdescLeft">&#160;</td><td class="mdescRight">Return the version of PSCI implemented.  <a href="#acce22fef786511b55b2be5c2a9716277">More...</a><br /></td></tr>
<tr class="separator:acce22fef786511b55b2be5c2a9716277"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a938cf0f93992e97c7c1bb3405bc87bc2"><td class="memItemLeft" align="right" valign="top">errval_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="psci_8c.html#a938cf0f93992e97c7c1bb3405bc87bc2">psci_cpu_suspend</a> (uint32_t power_state, lpaddr_t entry_point, uintptr_t context_id)</td></tr>
<tr class="memdesc:a938cf0f93992e97c7c1bb3405bc87bc2"><td class="mdescLeft">&#160;</td><td class="mdescRight">Suspend execution on a core or higher level topology node.  <a href="#a938cf0f93992e97c7c1bb3405bc87bc2">More...</a><br /></td></tr>
<tr class="separator:a938cf0f93992e97c7c1bb3405bc87bc2"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a0f41d092b6962df7f2d15de50a0e9056"><td class="memItemLeft" align="right" valign="top">errval_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="psci_8c.html#a0f41d092b6962df7f2d15de50a0e9056">psci_cpu_off</a> (void)</td></tr>
<tr class="memdesc:a0f41d092b6962df7f2d15de50a0e9056"><td class="mdescLeft">&#160;</td><td class="mdescRight">Power down the calling core.  <a href="#a0f41d092b6962df7f2d15de50a0e9056">More...</a><br /></td></tr>
<tr class="separator:a0f41d092b6962df7f2d15de50a0e9056"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a70f1e476cd3f4658f42d8c1d7e450727"><td class="memItemLeft" align="right" valign="top">errval_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="psci_8c.html#a70f1e476cd3f4658f42d8c1d7e450727">psci_cpu_on</a> (uintptr_t target_cpu, lpaddr_t entry_point, uintptr_t context_id)</td></tr>
<tr class="memdesc:a70f1e476cd3f4658f42d8c1d7e450727"><td class="mdescLeft">&#160;</td><td class="mdescRight">Power up a core.  <a href="#a70f1e476cd3f4658f42d8c1d7e450727">More...</a><br /></td></tr>
<tr class="separator:a70f1e476cd3f4658f42d8c1d7e450727"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aacb1d91dc7ed1428c36b00968222f218"><td class="memItemLeft" align="right" valign="top">errval_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="psci_8c.html#aacb1d91dc7ed1428c36b00968222f218">psci_cpu_freeze</a> (void)</td></tr>
<tr class="memdesc:aacb1d91dc7ed1428c36b00968222f218"><td class="mdescLeft">&#160;</td><td class="mdescRight">Places the core into an IMPLEMENTATION DEFINED low-power state.  <a href="#aacb1d91dc7ed1428c36b00968222f218">More...</a><br /></td></tr>
<tr class="separator:aacb1d91dc7ed1428c36b00968222f218"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:acd136cbc17118d860e452a7ae3e6e18c"><td class="memItemLeft" align="right" valign="top">errval_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="psci_8c.html#acd136cbc17118d860e452a7ae3e6e18c">psci_cpu_default_suspend</a> (lpaddr_t entry_point_address, uintptr_t context_id)</td></tr>
<tr class="memdesc:acd136cbc17118d860e452a7ae3e6e18c"><td class="mdescLeft">&#160;</td><td class="mdescRight">Will place a core into an IMPLEMENTATION DEFINED low-power state.  <a href="#acd136cbc17118d860e452a7ae3e6e18c">More...</a><br /></td></tr>
<tr class="separator:acd136cbc17118d860e452a7ae3e6e18c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a40413b3679f5b7a469e4848113f17301"><td class="memItemLeft" align="right" valign="top">errval_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="psci_8c.html#a40413b3679f5b7a469e4848113f17301">psci_affinity_info</a> (uintptr_t target_affinity, uint32_t lowest_affinity_level, <a class="el" href="armv7_2psci_8h.html#a680363ea83c503213f57b8b07271ba81">psci_affinity_t</a> *ret_info)</td></tr>
<tr class="memdesc:a40413b3679f5b7a469e4848113f17301"><td class="mdescLeft">&#160;</td><td class="mdescRight">Enable the caller to request status of an affinity instance.  <a href="#a40413b3679f5b7a469e4848113f17301">More...</a><br /></td></tr>
<tr class="separator:a40413b3679f5b7a469e4848113f17301"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a7fb93dd11859a7344a1433fc2b65142b"><td class="memItemLeft" align="right" valign="top">errval_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="psci_8c.html#a7fb93dd11859a7344a1433fc2b65142b">psci_migrate</a> (uintptr_t target_cpu)</td></tr>
<tr class="memdesc:a7fb93dd11859a7344a1433fc2b65142b"><td class="mdescLeft">&#160;</td><td class="mdescRight">Optional. This is used to ask a uniprocessor Trusted OS to migrate its context to a specific core.  <a href="#a7fb93dd11859a7344a1433fc2b65142b">More...</a><br /></td></tr>
<tr class="separator:a7fb93dd11859a7344a1433fc2b65142b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a7657f1af0c08200bafc6e50dbe229097"><td class="memItemLeft" align="right" valign="top">errval_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="psci_8c.html#a7657f1af0c08200bafc6e50dbe229097">psci_migrate_info_type</a> (<a class="el" href="armv7_2psci_8h.html#af329e1b481790d55718a208520609b31">psci_migrate_t</a> *ret_migrate_type)</td></tr>
<tr class="memdesc:a7657f1af0c08200bafc6e50dbe229097"><td class="mdescLeft">&#160;</td><td class="mdescRight">Optional. This function allows a caller to identify the level of multicore support present in the Trusted OS.  <a href="#a7657f1af0c08200bafc6e50dbe229097">More...</a><br /></td></tr>
<tr class="separator:a7657f1af0c08200bafc6e50dbe229097"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:acf9ecb7f8f81c9b5e522057f474b88b0"><td class="memItemLeft" align="right" valign="top">errval_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="psci_8c.html#acf9ecb7f8f81c9b5e522057f474b88b0">psci_migrate_info_up_cpu</a> (uintptr_t *ret_mpdir)</td></tr>
<tr class="memdesc:acf9ecb7f8f81c9b5e522057f474b88b0"><td class="mdescLeft">&#160;</td><td class="mdescRight">Optional. For a uniprocessor Trusted OS, this function returns the current resident core.  <a href="#acf9ecb7f8f81c9b5e522057f474b88b0">More...</a><br /></td></tr>
<tr class="separator:acf9ecb7f8f81c9b5e522057f474b88b0"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad78024cb65110e88e67326c1a957e866"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="ad78024cb65110e88e67326c1a957e866"></a>
void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="psci_8c.html#ad78024cb65110e88e67326c1a957e866">psci_system_off</a> (void)</td></tr>
<tr class="memdesc:ad78024cb65110e88e67326c1a957e866"><td class="mdescLeft">&#160;</td><td class="mdescRight">Shutdown the system. <br /></td></tr>
<tr class="separator:ad78024cb65110e88e67326c1a957e866"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a1eb6068c263d6c255e4fec5974e065dd"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a1eb6068c263d6c255e4fec5974e065dd"></a>
void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="psci_8c.html#a1eb6068c263d6c255e4fec5974e065dd">psci_system_reset</a> (void)</td></tr>
<tr class="memdesc:a1eb6068c263d6c255e4fec5974e065dd"><td class="mdescLeft">&#160;</td><td class="mdescRight">Reset the system. <br /></td></tr>
<tr class="separator:a1eb6068c263d6c255e4fec5974e065dd"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af6f75c6553dee8189b54fd699f8560b0"><td class="memItemLeft" align="right" valign="top">errval_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="psci_8c.html#af6f75c6553dee8189b54fd699f8560b0">psci_system_suspend</a> (lpaddr_t entry_point_address, uintptr_t context_id)</td></tr>
<tr class="memdesc:af6f75c6553dee8189b54fd699f8560b0"><td class="mdescLeft">&#160;</td><td class="mdescRight">Used to implement suspend to RAM. The semantics are equivalent to a CPU_SUSPEND to the deepest low-power state.  <a href="#af6f75c6553dee8189b54fd699f8560b0">More...</a><br /></td></tr>
<tr class="separator:af6f75c6553dee8189b54fd699f8560b0"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a4a65aba25323a5abaee3d7e51aac350f"><td class="memItemLeft" align="right" valign="top">errval_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="psci_8c.html#a4a65aba25323a5abaee3d7e51aac350f">psci_features</a> (uint32_t psci_fn_id, uint32_t *ret_feature_flags)</td></tr>
<tr class="memdesc:a4a65aba25323a5abaee3d7e51aac350f"><td class="mdescLeft">&#160;</td><td class="mdescRight">Query API to discover whether a specific PSCI function is implemented.  <a href="#a4a65aba25323a5abaee3d7e51aac350f">More...</a><br /></td></tr>
<tr class="separator:a4a65aba25323a5abaee3d7e51aac350f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a3fdac2b1973d6373341e36cbf2f21d57"><td class="memItemLeft" align="right" valign="top">errval_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="psci_8c.html#a3fdac2b1973d6373341e36cbf2f21d57">psci_node_hw_state</a> (uintptr_t target_cpu, uint32_t power_level, psci_node_hw_state_t *ret_node_hw)</td></tr>
<tr class="memdesc:a3fdac2b1973d6373341e36cbf2f21d57"><td class="mdescLeft">&#160;</td><td class="mdescRight">This API is intended to return the true HW state of a node in the power domain topology of the system.  <a href="#a3fdac2b1973d6373341e36cbf2f21d57">More...</a><br /></td></tr>
<tr class="separator:a3fdac2b1973d6373341e36cbf2f21d57"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac3943bbf94c94444f7804bfee22d12c7"><td class="memItemLeft" align="right" valign="top">errval_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="psci_8c.html#ac3943bbf94c94444f7804bfee22d12c7">psci_set_suspend_mode</a> (psci_suspend_mode_t mode)</td></tr>
<tr class="memdesc:ac3943bbf94c94444f7804bfee22d12c7"><td class="mdescLeft">&#160;</td><td class="mdescRight">This API allows setting the mode used by CPU_SUSPEND to coordinate power states.  <a href="#ac3943bbf94c94444f7804bfee22d12c7">More...</a><br /></td></tr>
<tr class="separator:ac3943bbf94c94444f7804bfee22d12c7"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a687c8f04cff85c7e821a18a012be1fb9"><td class="memItemLeft" align="right" valign="top">errval_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="psci_8c.html#a687c8f04cff85c7e821a18a012be1fb9">psci_stat_residency</a> (uintptr_t target_cpu, uint32_t power_state, uintptr_t *ret_residency)</td></tr>
<tr class="memdesc:a687c8f04cff85c7e821a18a012be1fb9"><td class="mdescLeft">&#160;</td><td class="mdescRight">Returns the amount of time the platform has spent in the given power state since cold boot.  <a href="#a687c8f04cff85c7e821a18a012be1fb9">More...</a><br /></td></tr>
<tr class="separator:a687c8f04cff85c7e821a18a012be1fb9"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a17781962aa57e91c649a84b613a0edad"><td class="memItemLeft" align="right" valign="top">errval_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="psci_8c.html#a17781962aa57e91c649a84b613a0edad">psci_stat_count</a> (uintptr_t target_cpu, uint32_t power_state, uintptr_t *count)</td></tr>
<tr class="memdesc:a17781962aa57e91c649a84b613a0edad"><td class="mdescLeft">&#160;</td><td class="mdescRight">Return the number of times the platform has used the given power state since cold boot.  <a href="#a17781962aa57e91c649a84b613a0edad">More...</a><br /></td></tr>
<tr class="separator:a17781962aa57e91c649a84b613a0edad"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<h2 class="groupheader">Function Documentation</h2>
<a class="anchor" id="a40413b3679f5b7a469e4848113f17301"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">errval_t psci_affinity_info </td>
          <td>(</td>
          <td class="paramtype">uintptr_t&#160;</td>
          <td class="paramname"><em>target_affinity</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint32_t&#160;</td>
          <td class="paramname"><em>lowest_affinity_level</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="armv7_2psci_8h.html#a680363ea83c503213f57b8b07271ba81">psci_affinity_t</a> *&#160;</td>
          <td class="paramname"><em>ret_info</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Enable the caller to request status of an affinity instance. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">target_affinity</td><td>MPDIR of the target cpu </td></tr>
    <tr><td class="paramname">lowest_affinity_level</td><td>Denotes the lowest valid affinity level field </td></tr>
    <tr><td class="paramname">ret_info</td><td></td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd></dd></dl>

</div>
</div>
<a class="anchor" id="acd136cbc17118d860e452a7ae3e6e18c"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">errval_t psci_cpu_default_suspend </td>
          <td>(</td>
          <td class="paramtype">lpaddr_t&#160;</td>
          <td class="paramname"><em>entry_point_address</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uintptr_t&#160;</td>
          <td class="paramname"><em>context_id</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Will place a core into an IMPLEMENTATION DEFINED low-power state. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">entry_point_address</td><td>Address to be executed when waking up </td></tr>
    <tr><td class="paramname">context_id</td><td>Context pointer to be left in x0/r0</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>SYS_ERR_OK on success PSCI_ERR_INVALID_ADDRESS </dd></dl>

</div>
</div>
<a class="anchor" id="aacb1d91dc7ed1428c36b00968222f218"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">errval_t psci_cpu_freeze </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Places the core into an IMPLEMENTATION DEFINED low-power state. </p>
<dl class="section return"><dt>Returns</dt><dd>on success, does not return PSCI_ERR_NOT_SUPPORTED PSCI_ERR_DENIED </dd></dl>

</div>
</div>
<a class="anchor" id="a0f41d092b6962df7f2d15de50a0e9056"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">errval_t psci_cpu_off </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Power down the calling core. </p>
<dl class="section return"><dt>Returns</dt><dd>PSCI_ERR_DENIED on failure The call does not return on success</dd></dl>
<p>This call is intended for use in hotplug. A core that is powered down by CPU_OFF can only be powered up again in response to a CPU_ON. </p>

</div>
</div>
<a class="anchor" id="a70f1e476cd3f4658f42d8c1d7e450727"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">errval_t psci_cpu_on </td>
          <td>(</td>
          <td class="paramtype">uintptr_t&#160;</td>
          <td class="paramname"><em>target_cpu</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">lpaddr_t&#160;</td>
          <td class="paramname"><em>entry_point</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uintptr_t&#160;</td>
          <td class="paramname"><em>context_id</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Power up a core. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">target_cpu</td><td>MPIDR of the target processors </td></tr>
    <tr><td class="paramname">entry_point</td><td>Address at which the core must commence execution </td></tr>
    <tr><td class="paramname">context_id</td><td>Value left in x0/r0 when resuming execution</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>SYS_ERR_OK on success PSCI_ERR_INVALID_PARAMETERS PSCI_ERR_INVALID_ADDRESS PSCI_ERR_ALREADY_ON PSCI_ERR_ON_PENDING PSCI_ERR_INTERNAL_FAILURE</dd></dl>
<p>This call is used to power up cores that either:</p><ul>
<li>Have not yet been booted into the calling supervisory software.</li>
<li>Have been previously powered down with a CPU_OFF call. </li>
</ul>

</div>
</div>
<a class="anchor" id="a938cf0f93992e97c7c1bb3405bc87bc2"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">errval_t psci_cpu_suspend </td>
          <td>(</td>
          <td class="paramtype">uint32_t&#160;</td>
          <td class="paramname"><em>power_state</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">lpaddr_t&#160;</td>
          <td class="paramname"><em>entry_point</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uintptr_t&#160;</td>
          <td class="paramname"><em>context_id</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Suspend execution on a core or higher level topology node. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">power_state</td><td>the power state to </td></tr>
    <tr><td class="paramname">entry_point</td><td>Physical address of the location to resume execution </td></tr>
    <tr><td class="paramname">context_id</td><td>Value left in x0/r0 when resuming execution</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>SYS_ERR_OK on success PSCI_ERR_INVALID_PARAMTER PSCI_ERR_INVALID_ADDRESS PSCI_ERR_DENIED</dd></dl>
<p>This call is intended for use in idle subsystems where the core is expected to return to execution through a wakeup event. See section 5.4. </p>

</div>
</div>
<a class="anchor" id="a4a65aba25323a5abaee3d7e51aac350f"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">errval_t psci_features </td>
          <td>(</td>
          <td class="paramtype">uint32_t&#160;</td>
          <td class="paramname"><em>psci_fn_id</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint32_t *&#160;</td>
          <td class="paramname"><em>ret_feature_flags</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Query API to discover whether a specific PSCI function is implemented. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">psci_fn_id</td><td>Function ID for a PSCI Function </td></tr>
    <tr><td class="paramname">ret_feature_flags</td><td>Returns a set of feature flags of the function</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>SYS_ERR_OK on success PSCI_ERR_NOT_SUPPORTED if the function is not supported or invalid </dd></dl>

</div>
</div>
<a class="anchor" id="a7fb93dd11859a7344a1433fc2b65142b"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">errval_t psci_migrate </td>
          <td>(</td>
          <td class="paramtype">uintptr_t&#160;</td>
          <td class="paramname"><em>target_cpu</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Optional. This is used to ask a uniprocessor Trusted OS to migrate its context to a specific core. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">target_cpu</td><td>MPDIR of the target core</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>SYS_ERR_OK on success PSCI_ERR_NOT_SUPPORTED PSCI_ERR_INVALID_PARAMETERS PSCI_ERR_DENIED PSCI_ERR_INTERNAL_FAILURE PSCI_ERR_NOT_PRESENT </dd></dl>

</div>
</div>
<a class="anchor" id="a7657f1af0c08200bafc6e50dbe229097"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">errval_t psci_migrate_info_type </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="armv7_2psci_8h.html#af329e1b481790d55718a208520609b31">psci_migrate_t</a> *&#160;</td>
          <td class="paramname"><em>ret_migrate_type</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Optional. This function allows a caller to identify the level of multicore support present in the Trusted OS. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">ret_migrate_type</td><td>Migration type capabilities</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>SYS_ERR_OK on success PSCI_ERR_NOT_SUPPORTED if the operation is not supported </dd></dl>

</div>
</div>
<a class="anchor" id="acf9ecb7f8f81c9b5e522057f474b88b0"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">errval_t psci_migrate_info_up_cpu </td>
          <td>(</td>
          <td class="paramtype">uintptr_t *&#160;</td>
          <td class="paramname"><em>ret_mpdir</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Optional. For a uniprocessor Trusted OS, this function returns the current resident core. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">ret_mpdir</td><td>MPIDR based value of core where the Trusted OS is resident</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>SYS_ERR_OK on success PSCI_ERR_NOT_SUPPORTED if not supported </dd></dl>

</div>
</div>
<a class="anchor" id="a3fdac2b1973d6373341e36cbf2f21d57"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">errval_t psci_node_hw_state </td>
          <td>(</td>
          <td class="paramtype">uintptr_t&#160;</td>
          <td class="paramname"><em>target_cpu</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint32_t&#160;</td>
          <td class="paramname"><em>power_level</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">psci_node_hw_state_t *&#160;</td>
          <td class="paramname"><em>ret_node_hw</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>This API is intended to return the true HW state of a node in the power domain topology of the system. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">target_cpu</td><td>Target CPU MPDIR </td></tr>
    <tr><td class="paramname">power_level</td><td>Power domain level for the node </td></tr>
    <tr><td class="paramname">ret_node_hw</td><td>return the power node hw state</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>SYS_ERR_OK on success PSCI_ERR_NOT_SUPPORTED PSCI_ERR_INVALID_PARAMETERS </dd></dl>

</div>
</div>
<a class="anchor" id="ac3943bbf94c94444f7804bfee22d12c7"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">errval_t psci_set_suspend_mode </td>
          <td>(</td>
          <td class="paramtype">psci_suspend_mode_t&#160;</td>
          <td class="paramname"><em>mode</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>This API allows setting the mode used by CPU_SUSPEND to coordinate power states. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">mode</td><td>Mode to put the system in</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>SYS_ERR_OK on success, PSCI_ERR_NOT_SUPPORTED PSCI_ERR_INVALID_PARAMETERS PSCI_ERR_DENIED </dd></dl>

</div>
</div>
<a class="anchor" id="a17781962aa57e91c649a84b613a0edad"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">errval_t psci_stat_count </td>
          <td>(</td>
          <td class="paramtype">uintptr_t&#160;</td>
          <td class="paramname"><em>target_cpu</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint32_t&#160;</td>
          <td class="paramname"><em>power_state</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uintptr_t *&#160;</td>
          <td class="paramname"><em>count</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Return the number of times the platform has used the given power state since cold boot. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">target_cpu</td><td>target CPU MPDIR </td></tr>
    <tr><td class="paramname">power_state</td><td>power state to query </td></tr>
    <tr><td class="paramname">count</td><td>returns the count</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>SYS_ERR_OK </dd></dl>

</div>
</div>
<a class="anchor" id="a687c8f04cff85c7e821a18a012be1fb9"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">errval_t psci_stat_residency </td>
          <td>(</td>
          <td class="paramtype">uintptr_t&#160;</td>
          <td class="paramname"><em>target_cpu</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint32_t&#160;</td>
          <td class="paramname"><em>power_state</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uintptr_t *&#160;</td>
          <td class="paramname"><em>ret_residency</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Returns the amount of time the platform has spent in the given power state since cold boot. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">target_cpu</td><td>target CPU MPDIR </td></tr>
    <tr><td class="paramname">power_state</td><td>power state to query </td></tr>
    <tr><td class="paramname">ret_residency</td><td>Returns the amount of time, in microseconds, spent in state</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>SYS_ERR_OK </dd></dl>

</div>
</div>
<a class="anchor" id="af6f75c6553dee8189b54fd699f8560b0"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">errval_t psci_system_suspend </td>
          <td>(</td>
          <td class="paramtype">lpaddr_t&#160;</td>
          <td class="paramname"><em>entry_point_address</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uintptr_t&#160;</td>
          <td class="paramname"><em>context_id</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Used to implement suspend to RAM. The semantics are equivalent to a CPU_SUSPEND to the deepest low-power state. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">entry_point_address</td><td>physical address to be executed when returning </td></tr>
    <tr><td class="paramname">context_id</td><td>context id to be stored in x0/r0</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>does not retturn on success PSCI_ERR_NOT_SUPPORTED PSCI_ERR_INVALID_ADDRESS PSCI_ERR_ALREADY_ON </dd></dl>

</div>
</div>
<a class="anchor" id="acce22fef786511b55b2be5c2a9716277"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">errval_t psci_version </td>
          <td>(</td>
          <td class="paramtype">uint16_t *&#160;</td>
          <td class="paramname"><em>major</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint16_t *&#160;</td>
          <td class="paramname"><em>minor</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Return the version of PSCI implemented. </p>
<p>Return the version of PSCI implemented. See section 5.3 for more details.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">major</td><td>returns the major version </td></tr>
    <tr><td class="paramname">minor</td><td>returns the minor version</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>SYS_ERR_OK on success PSCI_ERR_* on failure </dd></dl>

</div>
</div>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.11
</small></address>
</body>
</html>
