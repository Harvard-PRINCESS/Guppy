<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.11"/>
<title>Barrelfish: kernel/schedule_rbed.c File Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">Barrelfish
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.11 -->
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="modules.html"><span>Modules</span></a></li>
      <li><a href="annotated.html"><span>Data&#160;Structures</span></a></li>
      <li class="current"><a href="files.html"><span>Files</span></a></li>
    </ul>
  </div>
  <div id="navrow2" class="tabs2">
    <ul class="tablist">
      <li><a href="files.html"><span>File&#160;List</span></a></li>
      <li><a href="globals.html"><span>Globals</span></a></li>
    </ul>
  </div>
<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a class="el" href="dir_dc43877d82dd332f9fb2071fcca799d6.html">kernel</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#define-members">Macros</a> &#124;
<a href="#func-members">Functions</a>  </div>
  <div class="headertitle">
<div class="title">schedule_rbed.c File Reference</div>  </div>
</div><!--header-->
<div class="contents">

<p>Kernel scheduling policy: Rate-Based Earliest Deadline (RBED)  
<a href="#details">More...</a></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="define-members"></a>
Macros</h2></td></tr>
<tr class="memitem:a8ad3025d0d1d8ebdda5e9171b9f0e729"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="schedule__rbed_8c.html#a8ad3025d0d1d8ebdda5e9171b9f0e729">SPECTRUM</a>&#160;&#160;&#160;1000000</td></tr>
<tr class="separator:a8ad3025d0d1d8ebdda5e9171b9f0e729"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a1b996515309fc3c03449912bb33046e3"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="schedule__rbed_8c.html#a1b996515309fc3c03449912bb33046e3">BETA</a>&#160;&#160;&#160;(<a class="el" href="schedule__rbed_8c.html#a8ad3025d0d1d8ebdda5e9171b9f0e729">SPECTRUM</a> / 10)</td></tr>
<tr class="separator:a1b996515309fc3c03449912bb33046e3"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:a7ae703a8ca55d7450733cd4e44dacd76"><td class="memItemLeft" align="right" valign="top">struct <a class="el" href="structdcb.html">dcb</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="schedule__rbed_8c.html#a7ae703a8ca55d7450733cd4e44dacd76">schedule</a> (void)</td></tr>
<tr class="memdesc:a7ae703a8ca55d7450733cd4e44dacd76"><td class="mdescLeft">&#160;</td><td class="mdescRight">Scheduler policy.  <a href="#a7ae703a8ca55d7450733cd4e44dacd76">More...</a><br /></td></tr>
<tr class="separator:a7ae703a8ca55d7450733cd4e44dacd76"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae93ab1500e7b983f8f4656ff530aec20"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="schedule__rbed_8c.html#ae93ab1500e7b983f8f4656ff530aec20">scheduler_remove</a> (struct <a class="el" href="structdcb.html">dcb</a> *<a class="el" href="structdcb.html">dcb</a>)</td></tr>
<tr class="memdesc:ae93ab1500e7b983f8f4656ff530aec20"><td class="mdescLeft">&#160;</td><td class="mdescRight">Remove 'dcb' from scheduler ring.  <a href="#ae93ab1500e7b983f8f4656ff530aec20">More...</a><br /></td></tr>
<tr class="separator:ae93ab1500e7b983f8f4656ff530aec20"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad685e5609659423a7564bd4ce4b5f485"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="schedule__rbed_8c.html#ad685e5609659423a7564bd4ce4b5f485">scheduler_yield</a> (struct <a class="el" href="structdcb.html">dcb</a> *<a class="el" href="structdcb.html">dcb</a>)</td></tr>
<tr class="memdesc:ad685e5609659423a7564bd4ce4b5f485"><td class="mdescLeft">&#160;</td><td class="mdescRight">Yield 'dcb' for the rest of the current timeslice.  <a href="#ad685e5609659423a7564bd4ce4b5f485">More...</a><br /></td></tr>
<tr class="separator:ad685e5609659423a7564bd4ce4b5f485"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p>Kernel scheduling policy: Rate-Based Earliest Deadline (RBED) </p>
<p>The algorithm is described in the paper "Dynamic Integrated Scheduling of Hard Real-Time, Soft Real-Time and Non-Real-Time Processes" by Scott A. Brandt of UC Santa Cruz.</p>
<p>Note that while in the paper real number arithmetic is used on some variables, we employ fixed-point integer arithmetic within <a class="el" href="schedule__rbed_8c.html#a8ad3025d0d1d8ebdda5e9171b9f0e729">SPECTRUM</a> in these cases. </p>
</div><h2 class="groupheader">Macro Definition Documentation</h2>
<a class="anchor" id="a1b996515309fc3c03449912bb33046e3"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define BETA&#160;&#160;&#160;(<a class="el" href="schedule__rbed_8c.html#a8ad3025d0d1d8ebdda5e9171b9f0e729">SPECTRUM</a> / 10)</td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Minimum resource rate reserved for best-effort processes, in <a class="el" href="schedule__rbed_8c.html#a8ad3025d0d1d8ebdda5e9171b9f0e729">SPECTRUM</a>. We set this to 10%. </p>

</div>
</div>
<a class="anchor" id="a8ad3025d0d1d8ebdda5e9171b9f0e729"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define SPECTRUM&#160;&#160;&#160;1000000</td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Implementation Notes</p>
<p>real-time tasks: the behaviour of real-time tasks is characterized by four parameters: wcet (worst case execution time), period, (relative) deadline, and release_time. Besides release_time, the values of these parameters are not changed by the scheduler. RT tasks are considered to be periodic. Note that the interpretation of the parameters is a little different than the original RBED paper.</p>
<p>-&gt;release_time is the time that the task is ready to be scheduled. RT tasks with -&gt;release_time in the future are not effectively considered to be on the runqueue and are ignored by the scheduler. In order to meet its deadline the task needs to be scheduled no later than -&gt;release_time + deadline - wcet. EDF guarantees this property, as long as the utilization rate is &lt;= 1.</p>
<p>The execution of an rt task for a particular period ends either when: (a) the task runs outs of budget (-&gt;etime &gt;= -&gt;wcet), or (b) the task yields using <a class="el" href="schedule__rbed_8c.html#ad685e5609659423a7564bd4ce4b5f485" title="Yield &#39;dcb&#39; for the rest of the current timeslice. ">scheduler_yield()</a>. When this happens the task's -&gt;etime is reset to 0, while -&gt;release_time is increased by -&gt;period. Note that <a class="el" href="schedule__rbed_8c.html#ae93ab1500e7b983f8f4656ff530aec20" title="Remove &#39;dcb&#39; from scheduler ring. ">scheduler_remove()</a> does not finalize the current period of the task. Also, note that depending on -&gt;period, there might be a case that an rt task is not executed, even if the CPU is idle.</p>
<p>best-effort tasks: for best-effort tasks the scheduler is responsible to assigns proper values the RT parameters. Also, To prioritize between BE tasks, the scheduler uses -&gt;weight. </p>

</div>
</div>
<h2 class="groupheader">Function Documentation</h2>
<a class="anchor" id="a7ae703a8ca55d7450733cd4e44dacd76"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">struct <a class="el" href="structdcb.html">dcb</a>* schedule </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Scheduler policy. </p>
<dl class="section return"><dt>Returns</dt><dd>Next DCB to schedule or NULL if wait for interrupts. </dd></dl>

</div>
</div>
<a class="anchor" id="ae93ab1500e7b983f8f4656ff530aec20"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void scheduler_remove </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structdcb.html">dcb</a> *&#160;</td>
          <td class="paramname"><em>dcb</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Remove 'dcb' from scheduler ring. </p>
<p>Removes dispatcher 'dcb' from the scheduler ring. If it was not in the ring, this function is a no-op. The postcondition for this function is that dcb is not in the ring.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">dcb</td><td>Pointer to DCB to remove. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a class="anchor" id="ad685e5609659423a7564bd4ce4b5f485"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void scheduler_yield </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structdcb.html">dcb</a> *&#160;</td>
          <td class="paramname"><em>dcb</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Yield 'dcb' for the rest of the current timeslice. </p>
<p>Re-sorts 'dcb' into the scheduler queue with its release time increased by the timeslice period. It is an error to yield a dispatcher not in the scheduler queue.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">dcb</td><td>Pointer to DCB to remove. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.11
</small></address>
</body>
</html>
