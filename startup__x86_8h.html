<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.11"/>
<title>Barrelfish: kernel/include/arch/x86/startup_x86.h File Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">Barrelfish
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.11 -->
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="modules.html"><span>Modules</span></a></li>
      <li><a href="annotated.html"><span>Data&#160;Structures</span></a></li>
      <li class="current"><a href="files.html"><span>Files</span></a></li>
    </ul>
  </div>
  <div id="navrow2" class="tabs2">
    <ul class="tablist">
      <li><a href="files.html"><span>File&#160;List</span></a></li>
      <li><a href="globals.html"><span>Globals</span></a></li>
    </ul>
  </div>
<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a class="el" href="dir_dc43877d82dd332f9fb2071fcca799d6.html">kernel</a></li><li class="navelem"><a class="el" href="dir_009f605b833ac4622acd6c3c0c26c0f0.html">include</a></li><li class="navelem"><a class="el" href="dir_b938bbc65f66dd090a6a00a71c65b7d8.html">arch</a></li><li class="navelem"><a class="el" href="dir_8aa66e5a68be2da2209999477e9ded0d.html">x86</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#func-members">Functions</a>  </div>
  <div class="headertitle">
<div class="title">startup_x86.h File Reference</div>  </div>
</div><!--header-->
<div class="contents">

<p>Startup prototypes.  
<a href="#details">More...</a></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:a9151153b53a346c1ce4b9e9d034fa45e"><td class="memItemLeft" align="right" valign="top">errval_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="startup__x86_8h.html#a9151153b53a346c1ce4b9e9d034fa45e">startup_map_init</a> (lvaddr_t vbase, lpaddr_t base, size_t size, uint32_t flags)</td></tr>
<tr class="memdesc:a9151153b53a346c1ce4b9e9d034fa45e"><td class="mdescLeft">&#160;</td><td class="mdescRight">Map init user-space memory.  <a href="#a9151153b53a346c1ce4b9e9d034fa45e">More...</a><br /></td></tr>
<tr class="separator:a9151153b53a346c1ce4b9e9d034fa45e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a8ec3d54225aa32f26c2975513d267e88"><td class="memItemLeft" align="right" valign="top">errval_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="startup__x86_8h.html#a8ec3d54225aa32f26c2975513d267e88">startup_alloc_init</a> (void *state, genvaddr_t gvbase, size_t size, uint32_t flags, void **ret)</td></tr>
<tr class="memdesc:a8ec3d54225aa32f26c2975513d267e88"><td class="mdescLeft">&#160;</td><td class="mdescRight">Map init user-space memory.  <a href="#a8ec3d54225aa32f26c2975513d267e88">More...</a><br /></td></tr>
<tr class="separator:a8ec3d54225aa32f26c2975513d267e88"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a934e861818a2df3cb7e9b7390997117c"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a934e861818a2df3cb7e9b7390997117c"></a>
void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="startup__x86_8h.html#a934e861818a2df3cb7e9b7390997117c">create_module_caps</a> (struct spawn_state *st)</td></tr>
<tr class="memdesc:a934e861818a2df3cb7e9b7390997117c"><td class="mdescLeft">&#160;</td><td class="mdescRight">Setup the module cnode, which contains frame caps to all multiboot modules. <br /></td></tr>
<tr class="separator:a934e861818a2df3cb7e9b7390997117c"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p>Startup prototypes. </p>
</div><h2 class="groupheader">Function Documentation</h2>
<a class="anchor" id="a8ec3d54225aa32f26c2975513d267e88"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">errval_t startup_alloc_init </td>
          <td>(</td>
          <td class="paramtype">void *&#160;</td>
          <td class="paramname"><em>state</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">genvaddr_t&#160;</td>
          <td class="paramname"><em>gvbase</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">size_t&#160;</td>
          <td class="paramname"><em>size</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint32_t&#160;</td>
          <td class="paramname"><em>flags</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">void **&#160;</td>
          <td class="paramname"><em>ret</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Map init user-space memory. </p>
<p>This function maps pages of the init user-space module. It expects the virtual base address 'vbase' of a program segment of the init executable, its size 'size' and its ELF64 access control flags. It maps pages into physical memory that is allocated on the fly and puts corresponding frame caps into init's segcn.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">vbase</td><td>Virtual base address of program segment. </td></tr>
    <tr><td class="paramname">size</td><td>Size of program segment in bytes. </td></tr>
    <tr><td class="paramname">flags</td><td>ELF64 access control flags of program segment. </td></tr>
    <tr><td class="paramname">ret</td><td>Used to return base region pointer </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a class="anchor" id="a9151153b53a346c1ce4b9e9d034fa45e"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">errval_t startup_map_init </td>
          <td>(</td>
          <td class="paramtype">lvaddr_t&#160;</td>
          <td class="paramname"><em>vbase</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">lpaddr_t&#160;</td>
          <td class="paramname"><em>base</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">size_t&#160;</td>
          <td class="paramname"><em>size</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint32_t&#160;</td>
          <td class="paramname"><em>flags</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Map init user-space memory. </p>
<p>This function maps pages of the init user-space module. It expects the virtual base address 'vbase' of a program segment of the init executable, its size 'size' and its ELF64 access control flags. It maps pages to the sequential area of physical memory, given by 'base'. If you want to allocate physical memory frames as you go, you better use <a class="el" href="startup__x86_8c.html#a8ec3d54225aa32f26c2975513d267e88" title="Map init user-space memory. ">startup_alloc_init()</a>.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">vbase</td><td>Virtual base address of program segment. </td></tr>
    <tr><td class="paramname">base</td><td>Physical base address of program segment. </td></tr>
    <tr><td class="paramname">size</td><td>Size of program segment in bytes. </td></tr>
    <tr><td class="paramname">flags</td><td>ELF64 access control flags of program segment. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.11
</small></address>
</body>
</html>
